{"version":3,"file":"index.7371003b.js","sources":["../../src/views/login/index.vue"],"sourcesContent":["<template>\n    <div class=\"i-container\">\n        <n-form\n            :model=\"formState\"\n            :rules=\"rules\"\n            class=\"i-form\"\n            label-placement=\"left\"\n        >\n            <h1>{{ APP_NAME }}</h1>\n            <n-form-item path=\"username\">\n                <n-input\n                    v-model:value=\"formState.username\"\n                    :placeholder=\"t('common.username')\"\n                    :input-props=\"{ autocomplete: 'off' }\"\n                ></n-input>\n            </n-form-item>\n            <n-form-item path=\"password\">\n                <n-input\n                    v-model:value=\"formState.password\"\n                    type=\"password\"\n                    :placeholder=\"t('common.password')\"\n                    :input-props=\"{ autocomplete: 'off' }\"\n                ></n-input>\n            </n-form-item>\n            <n-form-item>\n                <p class=\"i-form-msg\"></p>\n                <n-button\n                    v-if=\"!ON_PERMISSION\"\n                    quaternary\n                    style=\"margin: 0 12px 0 0\"\n                    @click=\"handleCancel\"\n                >\n                    {{ t(\"common.cancel\") }}\n                </n-button>\n                <n-button\n                    type=\"primary\"\n                    attr-type=\"submit\"\n                    :loading=\"loading\"\n                    @click=\"handleSubmit\"\n                    :disabled=\"invalidForm()\"\n                    style=\"width: 120px\"\n                >\n                    {{ t(\"common.sign_in\") }}\n                </n-button>\n            </n-form-item>\n        </n-form>\n    </div>\n</template>\n\n<script>\nimport { ref, reactive, defineComponent } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport { NForm, NFormItem, NInput, NButton, useMessage } from \"naive-ui\";\nimport { useI18n } from \"vue-i18n\";\nimport { APP_NAME, ON_PERMISSION } from \"@/settings.js\";\n\nexport default defineComponent({\n    setup() {\n        const Store = useStore();\n        const Router = useRouter();\n        const Message = useMessage();\n        const { t } = useI18n();\n        const formState = reactive({\n            username: \"\",\n            password: \"\",\n        });\n        const rules = {\n            username: {\n                required: true,\n                trigger: \"blur\",\n                message: \"\",\n            },\n            password: {\n                required: true,\n                trigger: \"blur\",\n                message: \"\",\n            },\n        };\n        let loading = ref(false);\n\n        async function handleSubmit() {\n            loading.value = true;\n\n            const { code, msg } = await Store.dispatch(\"user/LOGIN\", formState);\n\n            switch (code) {\n                case 200:\n                    Router.push(\"/\");\n                    break;\n                case 1:\n                case 2:\n                    formState.password = \"\";\n                    Message.error(msg);\n                    break;\n                default:\n                    break;\n            }\n\n            loading.value = false;\n        }\n\n        function invalidForm() {\n            let { username, password } = formState;\n            return username === \"\" || password === \"\";\n        }\n\n        function handleCancel() {\n            Router.push(\"/\");\n        }\n\n        return {\n            APP_NAME,\n            ON_PERMISSION,\n            loading,\n            formState,\n            rules,\n            handleSubmit,\n            handleCancel,\n            invalidForm,\n            t,\n        };\n    },\n    components: {\n        NForm,\n        NFormItem,\n        NInput,\n        NButton,\n    },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.i-container {\n    background: var(--background-secondary);\n}\n.i-form {\n    box-sizing: border-box;\n    margin: auto;\n    padding: 12px 24px;\n    width: 360px;\n    max-width: 100%;\n    border-radius: var(--radius);\n    background: var(--background);\n    h1 {\n        margin-bottom: 24px;\n    }\n}\n.i-form-msg {\n    margin-right: auto;\n}\n</style>\n"],"names":["useI18n","_createElementVNode"],"mappings":";;;AAyDA,kBAAkB;EACd,QAAQ;AACJ,UAAM,QAAQ;AACd,UAAM,SAAS;AACf,UAAM,UAAU;AAChB,UAAM,EAAE,MAAMA;AACd,UAAM,YAAY,SAAS;AAAA,MACvB,UAAU;AAAA,MACV,UAAU;AAAA;AAEd,UAAM,QAAQ;AAAA,MACV,UAAU;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,SAAS;AAAA;AAAA,MAEb,UAAU;AAAA,QACN,UAAU;AAAA,QACV,SAAS;AAAA,QACT,SAAS;AAAA;AAAA;AAGjB,QAAI,UAAU,IAAI;AAElB,kCAA8B;AAC1B,cAAQ,QAAQ;AAEhB,YAAM,EAAE,MAAM,QAAQ,MAAM,MAAM,SAAS,cAAc;AAEzD,cAAQ;AAAA,aACC;AACD,iBAAO,KAAK;AACZ;AAAA,aACC;AAAA,aACA;AACD,oBAAU,WAAW;AACrB,kBAAQ,MAAM;AACd;AAAA;AAKR,cAAQ,QAAQ;AAAA;AAGpB,2BAAuB;AACnB,UAAI,EAAE,UAAU,aAAa;AAC7B,aAAO,aAAa,MAAM,aAAa;AAAA;AAG3C,4BAAwB;AACpB,aAAO,KAAK;AAAA;AAGhB,WAAO;AAAA,MACH;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA;AAAA;AAAA,EAGR,YAAY;AAAA,IACR;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA;qBA9HC;;;;;;;;;;MAGI,OAAO;MACR,OAAM;MACN;;;;QAGAC;;;;;cAGS;cACA,aAAW;;;;;;;;;;cAMZ;cACC;cACA,aAAW;;;;;;;;;;cAOZ;cACA;cACC,OAAK;;;;;;;;;cAMN;cACC;cACA,SAAO;cACP;cACD;;;;;;;;;;;;;;;;;;"}