{"version":3,"file":"index.f1da2a20.js","sources":["../../src/views/settings/index.vue"],"sourcesContent":["<template>\n    <div class=\"i-content\" ref=\"container$\">\n        <div class=\"i-settings-header\" :class=\"{ 'i-form-changed': changed }\">\n            <n-button\n                :bordered=\"false\"\n                quaternary\n                round\n                size=\"small\"\n                @click=\"handleCancle\"\n            >\n                {{ t(\"settings.cancle\") }}\n            </n-button>\n            <n-button\n                type=\"primary\"\n                round\n                strong\n                :loading=\"loading\"\n                @click=\"handleSubmit\"\n            >\n                {{ t(\"settings.save\") }}\n            </n-button>\n        </div>\n\n        <n-form\n            ref=\"form$\"\n            :label-placement=\"labelPlacement\"\n            label-width=\"200\"\n            class=\"i-settings-form\"\n            @change=\"handleFormChange\"\n        >\n            <n-form-item :label=\"t('settings.theme_setting')\">\n                <n-radio-group v-model:value=\"FormData.theme\">\n                    <n-space>\n                        <n-radio\n                            v-for=\"o in options.theme\"\n                            :key=\"o.value\"\n                            :value=\"o.value\"\n                            :disabled=\"o.disabled\"\n                        >\n                            {{ t(o.label) }}\n                        </n-radio>\n                    </n-space>\n                </n-radio-group>\n            </n-form-item>\n\n            <n-form-item :label=\"t('settings.sidebar_reverse')\">\n                <n-switch\n                    v-model:value=\"FormData.sidebar_reverse\"\n                    @update:value=\"handleManualChange\"\n                ></n-switch>\n            </n-form-item>\n\n            <n-form-item :label=\"t('settings.locale_setting')\">\n                <n-radio-group v-model:value=\"FormData.locale\">\n                    <n-space>\n                        <n-radio\n                            v-for=\"o in langs\"\n                            :key=\"o.value\"\n                            :value=\"o.value\"\n                        >\n                            {{ o.label }}\n                        </n-radio>\n                    </n-space>\n                </n-radio-group>\n            </n-form-item>\n\n            <n-form-item label=\" \">\n                <n-popconfirm\n                    @positive-click=\"handleRestore\"\n                    :negative-text=\"t('common.cancel')\"\n                    :positive-text=\"t('common.confirm')\"\n                    :show-icon=\"false\"\n                >\n                    <template #trigger>\n                        <n-button type=\"error\" secondary strong>\n                            {{ t(\"settings.restore\") }}\n                        </n-button>\n                    </template>\n                    <span>{{ t(\"settings.need_reload\") }}</span>\n                </n-popconfirm>\n            </n-form-item>\n        </n-form>\n    </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, ref, onMounted, onUnmounted } from \"vue\";\nimport {\n    NForm,\n    NFormItem,\n    NInputNumber,\n    NSwitch,\n    NRadio,\n    NRadioGroup,\n    NButton,\n    NSpace,\n    NPopconfirm,\n} from \"naive-ui\";\nimport { useI18n } from \"vue-i18n\";\nimport { useStore } from \"vuex\";\nimport { langs } from \"@/locale\";\n\nexport default defineComponent({\n    name: \"Settings\",\n    setup() {\n        const { t } = useI18n();\n        const Store = useStore();\n        const form$ = ref(null);\n        const container$ = ref(null);\n        const options = reactive({\n            theme: [\n                { value: \"\", label: \"settings.theme_light\" },\n                { value: \"theme-dark\", label: \"settings.theme_dark\" },\n                { value: \"auto\", label: \"settings.auto\", disabled: true },\n            ],\n        });\n        const changed = ref(false);\n        const loading = ref(false);\n        const labelPlacement = ref(\"left\");\n        const FormData = getRawFormData();\n\n        onMounted(() => {\n            handleResize();\n            window.addEventListener(\"resize\", handleResize);\n        });\n\n        onUnmounted(() => {\n            window.removeEventListener(\"resize\", handleResize);\n        });\n\n        function handleResize() {\n            if (container$.value.offsetWidth < 720) {\n                labelPlacement.value = \"top\";\n            } else {\n                labelPlacement.value = \"left\";\n            }\n        }\n\n        function getRawFormData() {\n            return reactive(Object.assign({}, Store.state.settings));\n        }\n\n        function handleFormChange() {\n            changed.value = true;\n        }\n\n        function handleCancle() {\n            changed.value = false;\n            Object.assign(FormData, getRawFormData());\n            form$.value.restoreValidation();\n        }\n\n        function handleSubmit() {\n            loading.value = true;\n            changed.value = false;\n            Store.commit(\"settings/UPDATE_SETTINGS\", FormData);\n            form$.value.restoreValidation();\n            loading.value = false;\n        }\n\n        function handleManualChange(value) {\n            changed.value = true;\n        }\n\n        function handleRestore() {\n            Store.commit(\"settings/RESTORE_SETTINGS\");\n        }\n\n        return {\n            FormData,\n            options,\n            langs,\n            changed,\n            loading,\n            labelPlacement,\n            t,\n            handleFormChange,\n            handleCancle,\n            handleSubmit,\n            handleManualChange,\n            handleRestore,\n            form$,\n            container$,\n        };\n    },\n    components: {\n        NForm,\n        NFormItem,\n        NInputNumber,\n        NSwitch,\n        NRadio,\n        NRadioGroup,\n        NButton,\n        NSpace,\n        NPopconfirm,\n    },\n});\n</script>\n\n<style scoped lang=\"scss\">\n.i-settings-header {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: 10;\n    display: flex;\n    align-items: center;\n    padding: 8px 12px;\n    background: var(--background-opacity);\n    backdrop-filter: blur(8px);\n    transition: var(--transition);\n    transform: translate(0, -4px);\n    opacity: 0;\n    &.i-form-changed {\n        transform: none;\n        opacity: 1;\n    }\n    > .n-button:first-child {\n        margin: 0 8px 0 auto;\n    }\n}\n.i-settings-form {\n    padding: 60px 12px 40px;\n    :deep(.n-form-item-label) {\n        margin-right: 20px;\n    }\n}\n</style>\n"],"names":["useI18n","_createElementBlock","_openBlock"],"mappings":"8RAsGA,QAAkB,GACd,KAAM,WACN,OAAQ,CACJ,KAAM,CAAE,KAAMA,IACR,EAAQ,IACR,EAAQ,EAAI,MACZ,EAAa,EAAI,MACjB,EAAU,EAAS,CACrB,MAAO,CACH,CAAE,MAAO,GAAI,MAAO,wBACpB,CAAE,MAAO,aAAc,MAAO,uBAC9B,CAAE,MAAO,OAAQ,MAAO,gBAAiB,SAAU,OAGrD,EAAU,EAAI,IACd,EAAU,EAAI,IACd,EAAiB,EAAI,QACrB,EAAW,IAEjB,EAAU,IAAM,CACZ,IACA,OAAO,iBAAiB,SAAU,KAGtC,EAAY,IAAM,CACd,OAAO,oBAAoB,SAAU,KAGzC,YAAwB,CACpB,AAAI,EAAW,MAAM,YAAc,IAC/B,EAAe,MAAQ,MAEvB,EAAe,MAAQ,OAI/B,YAA0B,CACtB,MAAO,GAAS,OAAO,OAAO,GAAI,EAAM,MAAM,WAGlD,YAA4B,CACxB,EAAQ,MAAQ,GAGpB,YAAwB,CACpB,EAAQ,MAAQ,GAChB,OAAO,OAAO,EAAU,KACxB,EAAM,MAAM,oBAGhB,YAAwB,CACpB,EAAQ,MAAQ,GAChB,EAAQ,MAAQ,GAChB,EAAM,OAAO,2BAA4B,GACzC,EAAM,MAAM,oBACZ,EAAQ,MAAQ,GAGpB,WAA4B,EAAO,CAC/B,EAAQ,MAAQ,GAGpB,YAAyB,CACrB,EAAM,OAAO,6BAGjB,MAAO,CACH,WACA,UACA,QACA,UACA,UACA,iBACA,IACA,mBACA,eACA,eACA,qBACA,gBACA,QACA,eAGR,WAAY,CACR,QACA,YACA,eACA,UACA,SACA,cACA,UACA,SACA,oBAjMmB,qNAoBbC,uFAhBE,SAAU,GACV,cACA,SACC,+GAMD,eACA,SACC,UACA,QAAO,wHAQX,YACD,mCACA,oBACC,8RAOsBC,UACN,IAAK,EAAE,MACP,sRAWM,+UASAA,UACN,IAAK,EAAE,yKAWf,gBAAe,gBACf,gBAAe,qBACf,2EAG0B,aAAU"}